<style id="antiClickjack">body{display:none !important;}</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>

<div style="margin:10px">
	<div class="modal-header">
		<span style="font-weight: bold; font-size: 20px">
			Add Profiles
	    </span>
		<span class="pull-right">
			<button class="btn btn-xs btn-danger" ng-click="dismissModal()"><i class="fa fa-times"></i>Close</button>
	  	</span>
	</div>

	<div class="modal-body" style="padding:10px 0px 0px 0px">

	<div class="row">
	<div class="col-md-12">
        	<!-- Profile Errors -->
        	<div class="panel panel-danger" ng-show="profileValidationErrors.length">
        		<div class="panel-heading bold"><i style="font-size: 20px" class="fa fa-exclamation-triangle" aria-hidden="true"></i> Profile file error<span ng-show="profileValidationErrors.length >1">s</span></div>  
        			<table class="table table-condensed table-bordered">
		                <thead class="tbl-header-danger">
			                <th style="width:50px;text-align: center">#</th>
			                <th colspan="2">Error</th>
		                </thead>	                
		                <tbody ng-repeat="error in profileValidationErrors track by $index"> 
			                <tr>			                    
			                    <td rowspan="3" style="text-align: center">
			                    	{{$index +1}}
			                    </td>
			                    <td style="width:75px">
			                    	Row:
			                    </td>
			                    <td>
			                    	{{error.line}}
			                    </td>
			                </tr>
			                <tr>			                    
			                    <td style="width:75px">
			                    	Column
			                    </td>
			                    <td>
			                    	{{error.column}}
			                    </td>
			                </tr>
			                <tr>			                    
			                    <td style="width:75px">
			                    	Message
			                    </td>
			                    <td class="bold">
			                    	{{error.message}}
			                    </td>
			                </tr>
	                	</tbody>
	            	</table>	
        		</div>
	
			<!-- Value Set Errors -->
        	<div class="panel panel-danger" ng-show="valueSetValidationErrors.length">
        		<div class="panel-heading bold"><i style="font-size: 20px" class="fa fa-exclamation-triangle" aria-hidden="true"></i> Value set file error<span ng-show="valueSetValidationErrors.length >1">s</span></div>  
        			<table class="table table-condensed table-bordered">
		                <thead class="tbl-header-danger">
			                <th style="width:50px;text-align: center">#</th>
			                <th colspan="2">Error</th>
		                </thead>	                
		                <tbody ng-repeat="error in valueSetValidationErrors track by $index"> 
			                <tr>			                    
			                    <td rowspan="3" style="text-align: center">
			                    	{{$index +1}}
			                    </td>
			                    <td style="width:75px">
			                    	Row:
			                    </td>
			                    <td>
			                    	{{error.line}}
			                    </td>
			                </tr>
			                <tr>			                    
			                    <td style="width:75px">
			                    	Column
			                    </td>
			                    <td>
			                    	{{error.column}}
			                    </td>
			                </tr>
			                <tr>			                    
			                    <td style="width:75px">
			                    	Message
			                    </td>
			                    <td class="bold">
			                    	{{error.message}}
			                    </td>
			                </tr>
	                	</tbody>
	            	</table>	
        		</div>
        		
        		
        		<!-- Constraint Errors -->
        	<div class="panel panel-danger" ng-show="constraintValidationErrors.length">
        		<div class="panel-heading bold"><i style="font-size: 20px" class="fa fa-exclamation-triangle" aria-hidden="true"></i> Contraints file error<span ng-show="constraintValidationErrors.length >1">s</span></div>  
        			<table class="table table-condensed table-bordered">
		                <thead class="tbl-header-danger">
			                <th style="width:50px;text-align: center">#</th>
			                <th colspan="2">Error</th>
		                </thead>	                
		                <tbody ng-repeat="error in constraintValidationErrors track by $index"> 
			                <tr>			                    
			                    <td rowspan="3" style="text-align: center">
			                    	{{$index +1}}
			                    </td>
			                    <td style="width:75px">
			                    	Row:
			                    </td>
			                    <td>
			                    	{{error.line}}
			                    </td>
			                </tr>
			                <tr>			                    
			                    <td style="width:75px">
			                    	Column
			                    </td>
			                    <td>
			                    	{{error.column}}
			                    </td>
			                </tr>
			                <tr>			                    
			                    <td style="width:75px">
			                    	Message
			                    </td>
			                    <td class="bold">
			                    	{{error.message}}
			                    </td>
			                </tr>
	                	</tbody>
	            	</table>	
        		</div>

			 <!-- No Errors found in resource validation -->
          	 <div class="panel panel-info" ng-show="profileMessages.length  && constraintValidationErrors.length == 0 && valueSetValidationErrors.length == 0 ">
          	 <div class="panel-heading">Profile Group</div>  
          	  <div class="panel-body">
          	  	<form name="tsForm">
          	  	<div class="row">
          	 		<div class="form-group" ng-if="existingTestPlans != null && existingTestPlans.length > 0">
          	 		<div class="col-md-12">
			          <label class="control-label" for="UploadTPSelect">Profile Group <small>(Select or create Profile Group)</small></label>
		                <div class="input-group" style="width:500px">
			                <ui-select name="UploadTPSelect" allow-clear="" ng-model="existingTP.selected" ng-change="selectTP()" theme="bootstrap">
					            <ui-select-match placeholder="Select a Profile Group">{{$select.selected.name}}</ui-select-match>
					            <ui-select-choices repeat="item in existingTestPlans | filter: $select.search">
					              <div class="bold" ng-bind-html="item.name | highlight: $select.search"></div>
					              <small ng-bind-html="item.description | highlight: $select.search"></small>
					            </ui-select-choices>
					          </ui-select>
					          <span class="input-group-btn">
				              <button type="button" ng-click="clearTestGroupForm();" class="btn btn-default btn-info">
				                <span class="fa fa-plus red"></span> Create a Profile Group
				              </button>
				            </span>
			            </div>
			        </div>
			        </div>
          	 	</div>
          	 	<div class="row" ng-show="!testcase.groupId">
          	 		<div class="col-md-12">
	          	 		<label for="testcasename">Profile Group Name: <span class="red" title="required field">*</span></label>     
	          	 		<input id="testcasename" required="" name="name" ng-model="testcase.name" class="input-sm form-control ng-pristine ng-valid ng-empty ng-touched"><br>
          	 		</div>
          	 	</div>
          		<div class="row" ng-show="!testcase.groupId">
          			<div class="col-md-12">
          				<label for="testcasedescription">Profile Group Description: <span class="red" title="required field">*</span></label>
          				<textarea id="testcasedescription" required="" name="description" ng-model="testcase.description" class="form-control ng-pristine ng-valid ng-empty ng-touched"></textarea><br>
          			</div>
          		</div>
          		
				<div class="row">
					<div class="col-md-12">
						<label>Profiles:</label>  <span class="red" title="Select at least one">*</span>
						<table class="table table-striped table-condensed table-bordered">
		                <thead class="tbl-header">
		                <th width="30px">
		                    <input ng-click="profileCheckToggle()" ng-model="profileCheckToggleStatus" ng-checked="{{profileCheckToggleStatus}}" type="checkbox">
		                </th>
		                <th>Name</th>
		                <th>Identifier</th>
		                <th>Description</th>
		                <th>Type</th>
		                <th>Event</th>
		                <th>StructID</th>
		                 </thead>
		                <tbody>
			                <tr ng-repeat="item in profileMessages">
			                    <td>
			                        <input ng-disabled="false" ng-show="!item.used" type="checkbox" ng-model="item.activated" ng-checked="{{item.activated}}">
			                        <i ng-show="item.used" class="fa fa-exclamation-triangle red" aria-hidden="true" title="Message already in system"></i>		                       
			                   	</td>
			                    <td>
			                    	<input ng-disabled="item.used" ng-="" ng-model="item.name" ng-required="item.activated" style="width: 100%">
			                    </td>
			                    <td>
			                    	{{item.identifier}}
			                    </td>
			                    <td>
			                    	{{item.description}}
			                    </td>
			                    <td>
			                    	{{item.type}}
			                  	  </td>
			                    <td>
			                    	{{item.event}}
			                    </td>
			                    <td>
			                    	{{item.structID}}
			                    </td>
			                </tr>
	                	</tbody>
	            	</table>
	            	</div>
	            </div>
            	<br>
            	<div style="text-align:right">
	            	<button type="button" class="btn btn-success btn-s" ng-click="addSelectedTestCases()" ng-show="profileMessages.length" ng-disabled="!getSelectedTestcases().length || !tsForm.$valid">
						Save
	                </button>
	                <button type="button" class="btn btn-warning btn-s" ng-click="dismissModal()" ng-show="profileMessages.length">
						Cancel and Close
	                </button>
                </div>
                </form>
            </div>
            </div>
        </div>
	</div>
	</div>
	</div>